# ======
# Config
# ======

# Modifier key (Mod1 = Left Alt)
set $mod Mod1

# Wallpaper
output * bg ~/.config/sway/background.png fill

# Idle Management
exec swayidle -w timeout 60 'swaymsg "output * power off"' resume 'swaymsg "output * power on"'

# Keybinds

    # Application launcher
    bindsym $mod+Space exec fuzzel | xargs swaymsg exec --

    # Terminal
    bindsym $mod+Return exec foot

    # Kill focused window
    bindsym $mod+q kill

    # Drag floating windows by holding down $mod and left mouse button.
    # Resize them with right mouse button + $mod.
    # Also works for non-floating windows.
    floating_modifier $mod normal

    # Reload the configuration file
    bindsym $mod+Shift+c reload

    # Exit sway (logs you out of your Wayland session)
    bindsym $mod+Shift+e exec swaynag -t warning -m 'Do you really want to exit sway? This will end your Wayland session.' -B 'Yes, exit sway' 'swaymsg exit'

# Moving around

    # Change the focus
    bindsym $mod+left focus left
    bindsym $mod+down focus down
    bindsym $mod+up focus up
    bindsym $mod+right focus right

    # Move the focused window
    bindsym $mod+Shift+left move left
    bindsym $mod+Shift+down move down
    bindsym $mod+Shift+up move up
    bindsym $mod+Shift+right move right

# Workspaces

    # Switch to workspace
    bindsym $mod+1 workspace number 1
    bindsym $mod+2 workspace number 2
    bindsym $mod+3 workspace number 3
    bindsym $mod+4 workspace number 4
    bindsym $mod+5 workspace number 5
    bindsym $mod+6 workspace number 6
    bindsym $mod+7 workspace number 7
    bindsym $mod+8 workspace number 8
    bindsym $mod+9 workspace number 9
    bindsym $mod+0 workspace number 10

    # Move focused container to workspace
    bindsym $mod+Shift+1 move container to workspace number 1
    bindsym $mod+Shift+2 move container to workspace number 2
    bindsym $mod+Shift+3 move container to workspace number 3
    bindsym $mod+Shift+4 move container to workspace number 4
    bindsym $mod+Shift+5 move container to workspace number 5
    bindsym $mod+Shift+6 move container to workspace number 6
    bindsym $mod+Shift+7 move container to workspace number 7
    bindsym $mod+Shift+8 move container to workspace number 8
    bindsym $mod+Shift+9 move container to workspace number 9
    bindsym $mod+Shift+0 move container to workspace number 10

# Layout stuff

    # Switch the current container between different layout styles
    bindsym $mod+s layout toggle split

    # Make the current focus fullscreen
    bindsym $mod+f fullscreen

    # Toggle the current focus between tiling and floating mode
    bindsym $mod+shift+f floating toggle

    # Move focus to the parent container
    bindsym $mod+a focus parent

# Scratchpad

    # Move the currently focused window to the scratchpad
    bindsym $mod+Shift+tab move scratchpad

    # Show the next scratchpad window or hide the focused scratchpad window.
    # If there are multiple scratchpad windows, this command cycles through them.
    bindsym $mod+tab scratchpad show

# Resizing containers:

mode "resize" {
    # left will shrink the containers width
    # right will grow the containers width
    # up will shrink the containers height
    # down will grow the containers height
    bindsym left resize shrink width 10px
    bindsym down resize grow height 10px
    bindsym up resize shrink height 10px
    bindsym right resize grow width 10px

    # Return to default mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

# ===================
# Additional settings
# ===================

focus_follows_mouse no

for_window [workspace="__focused__"] inhibit_idle fullscreen

# Custom keybinds
bindsym XF86MonBrightnessDown exec brightnessctl set 2%-
bindsym XF86MonBrightnessUp exec brightnessctl set 2%+

bindsym XF86AudioRaiseVolume exec wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 2%+
bindsym XF86AudioLowerVolume exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 2%-
bindsym XF86AudioMicMute exec wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindsym XF86AudioMute exec wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle

bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous

bindsym $mod+shift+s exec grim -g "$(slurp)" - | wl-copy
bindsym $mod+shift+t exec grim -g "$(slurp)" - | tesseract - - | wl-copy

bindsym $mod+ctrl+s exec sh $HOME/.config/sway/screenrec.sh

# Input devices
input type:touchpad {
    middle_emulation enabled
    natural_scroll enabled
    tap enabled
}
input type:keyboard {
    xkb_layout us
    xkb_variant colemak_dh
}
input type:pointer {
    accel_profile flat
    pointer_accel -0.93
}
# ==========
# Appearance
# ==========

# Polar Night
set $nord0 #2E3440
set $nord1 #3B4252
set $nord2 #434C5E
set $nord3 #4C566A

# Snow
set $nord4 #D8DEE9
set $nord5 #E5E9F0
set $nord6 #ECEFF4

# Frost
set $nord7 #8FBCBB
set $nord8 #88C0D0
set $nord9 #81A1C1
set $nord10 #5E81AC

# Aurora
set $nord11 #BF616A
set $nord12 #D08770
set $nord13 #EBCB8B
set $nord14 #A3BE8C
set $nord15 #B48EAD

# Cursor
seat seat0 xcursor_theme Adwaita

# GTK
exec {
    gsettings set org.gnome.desktop.interface color-scheme prefer-dark
    gsettings set org.gnome.desktop.interface cursor-theme Adwaita
    gsettings set org.gnome.desktop.interface gtk-theme Nordic
    gsettings set org.gnome.desktop.interface icon-theme Adwaita
}

# Window border
client.focused $nord10 $nord10 $nord6 #2e9ef4 $nord7
default_border pixel 1
default_floating_border pixel 1

# Status bar
bar {
    position top
    status_command while $HOME/.config/sway/statusbar.sh; do sleep 1; done
    colors {
        statusline $nord6
        background $nord0
        inactive_workspace $nord0 $nord0 $nord6
        focused_workspace $nord7 $nord7 $nord0
    }
    font Inter Display Medium 10
}

# Imports
include /etc/sway/config.d/*
